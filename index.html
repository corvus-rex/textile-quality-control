<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebSocket UI</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<div class="app-wrapper">
    <img src="assets/logo.png" alt="Logo" class="app-logo">

    <div class="container">
      <div id="status" class="status">Connecting...</div>

      <h2 id="roll-header">Roll Section</h2>
      <div class="grid-2" id="roll-section">
        
          <div class="field">
            <label for="dateField">Tanggal</label>
            <input id="dateField" type="date" disabled>
          </div>
          <select id="typeField">
            <option value="">Tipe Kain</option>
            <option value="Sinaran">Sinaran</option>
            <option value="JD Denim">JD Denim</option>
            <option value="Custom">Custom</option>
          </select>
          <input id="customTypeField" type="text" placeholder="Tipe Kain" hidden disabled>
          <input id="kpField" type="text" placeholder="KP" disabled>
          <input id="texCodeField" type="text" placeholder="Kode Kain" disabled>
          <input id="operatorField" type="text" placeholder="Operator" disabled>
          <button id="stopBtn" hidden>Stop Session</button>
      </div>

      <h2 id="weaving-header">Weaving Section</h2>
      <div class="grid-2" id="weaving-section">
        <input id="nbField" type="number" placeholder="Nb">
        <input id="mcField" type="text" placeholder="Mc">
        <input id="tglNaikField" type="text" placeholder="Tgl Naik">
        
        <div class="field">
          <label for="tglPotField">Tgl Pot</label>  
          <input id="tglPotField" type="date" placeholder="Tgl Pot">  
        </div>
        
        <input id="potField" type="text" placeholder="Pot">
        <input id="insPotField" type="text" placeholder="Ins Pot">
        <input id="paField" type="number" step="0.01" placeholder="PA">
        <input id="lebarField" type="number" placeholder="Lebar">
        <input id="baField" type="number" step="0.01" placeholder="BA">
        <input id="tagIdField" type="number" placeholder="Tag ID">
        <input id="insGrField" type="text" placeholder="Ins Gr">
      </div>

      
      <h2 id="bbsf-header">BBSF Section</h2>
      <div class="grid-2" id="bbsf-section">
        <input id="shiftField" type="text" placeholder="Shift">
        <input id="insField" type="text" placeholder="Ins">

        <div class="field">
          <label for="tglProsesField">Tgl Proses</label>  
          <input id="tglProsesField" type="date" placeholder="Tgl Proses">
        </div>

      </div>

      <button id="startBtn" disabled>Start Session</button>
      
      <div id="grid-3" hidden>
        <div id="sub-container-input"> 
          <h3> Defect List </h3>
          <div id="dynamic-input-list"></div>
        </div>
        <div id="sub-container-defect-type"> 
          <h3> Input Defect Type </h3> 
          <div class="defect-list"></div>
        </div>
        <div id="sub-container-point"> 
          <h3> Input Point </h3> 
          <div class="point-list"></div>
        </div>  
        <div class="invis-sub-container"> 
          <input class="encoder-pos" type="text" disabled="true" value="0 m">
          <button id="send-defect-btn">Submit Defect</button>
        </div>  
        <div id="sub-container-susut-table"> 
          <h3> Susut Table </h3>
        </div>
        <div class="invis-sub-container"> 
          <input id="susut-input" type="number" placeholder="Input Susut">
        </div>  
        <div class="invis-sub-container">
          <button id="send-susut-btn">Submit Susut</button>
        </div>
      </div>

      <div id="grid-4" hidden>
        <div id="sub-container-result">
          <h3>Result</h3>
            <table class="result-table">
              <tr><th>Meter</th><td id="res-meter"></td></tr>
              <tr><th>Yard</th><td id="res-yard"></td></tr>
              <tr><th>K</th><td id="res-k"></td></tr>
              <tr><th>CM/CD</th><td id="res-cmcd"></td></tr>
              <tr><th>TP</th><td id="res-tp"></td></tr>
              <tr><th>PG</th><td id="res-pg"></td></tr>
              <tr><th>Grd</th><td id="res-grd"></td></tr>
            </table>
        </div>
        <div id="sub-container-update-summary">
          <h3>Update Summary</h3>

          <input
            id="cmField"
            type="number"
            step="0.01"
            placeholder="CM"
          >

          <input
            id="beratField"
            type="number"
            step="0.01"
            placeholder="Berat"
          >

          <input
            id="lfField"
            type="number"
            step="0.01"
            placeholder="LF"
          >

          <input
            id="slField"
            type="number"
            step="1"
            placeholder="SL"
          >

          <input
            id="ssField"
            type="text"
            placeholder="SS"
          >

          <select id="gradeField">
            <option value="">Grade</option>
            <option value="Axp">Axp</option>
            <option value="ALK">ALK</option>
            <option value="LUPPER">LUPPER</option>
            <option value="ABL">ABL</option>
            <option value="CSP">CSP</option>
            <option value="EF">EF</option>
          </select>

          <textarea
            id="ketEfField"
            placeholder="Ket EF"
            rows="4"
          ></textarea>
        </div>
        <button id="submitSummaryBtn" class="submit-summary-btn">
          Update Summary
        </button>
      </div>
      <div id="grid-5" hidden>

        <!-- Roll Summary -->
        <div id="sub-container-roll-summary" class="summary-box">
          <h3>Roll Summary</h3>
          <table class="summary-table">
            <tr><th>Date</th><td></td></tr>
            <tr><th>Tipe Kain</th><td></td></tr>
            <tr><th>KP</th><td></td></tr>
            <tr><th>Kode Kain</th><td></td></tr>
            <tr><th>Operator</th><td></td></tr>
          </table>
        </div>

        <!-- Weaving Summary -->
        <div id="sub-container-weaving-summary" class="summary-box">
          <h3>Weaving Summary</h3>
          <table class="summary-table">
            <tr><th>Nb</th><td></td></tr>
            <tr><th>Mc</th><td></td></tr>
            <tr><th>Tgl Naik</th><td></td></tr>
            <tr><th>Tgl Pot</th><td></td></tr>
            <tr><th>Pot</th><td></td></tr>
            <tr><th>Ins. Pot</th><td></td></tr>
            <tr><th>PA</th><td></td></tr>
            <tr><th>Lebar</th><td></td></tr>
            <tr><th>BA</th><td></td></tr>
            <tr><th>Tag ID</th><td></td></tr>
            <tr><th>Ins. Gr</th><td></td></tr>
          </table>
        </div>

        <!-- BBSF Summary -->
        <div id="sub-container-bbsf-summary" class="summary-box">
          <h3>BBSF Summary</h3>
          <table class="summary-table">
            <tr><th>Shift</th><td></td></tr>
            <tr><th>Ins</th><td></td></tr>
            <tr><th>Tgl Proses</th><td></td></tr>
          </table>
        </div>

        <!-- Defect List Summary -->
        <div id="sub-container-defect-list-summary" class="summary-box">
          <h3>Defect List Summary</h3>
          <table class="summary-table defect-summary-table">
            <thead>
              <tr>
                <th>Meter</th>
                <th>Defect Type</th>
                <th>Point</th>
              </tr>
            </thead>
            <tbody>
              <!-- rows inserted later -->
            </tbody>
          </table>
        </div>

        <!-- Susut Table Summary -->
        <div id="sub-container-susut-table-summary" class="summary-box">
          <h3>Susut Table Summary</h3>

          <table class="summary-table susut-summary-table">
            <thead>
              <tr>
                <th>Range</th>
                <!-- dynamic susut columns inserted here -->
              </tr>
            </thead>

            <tbody>
              <tr><td>0–10</td></tr>
              <tr><td>30–40</td></tr>
              <tr><td>40–60</td></tr>
              <tr><td>60–70</td></tr>
              <tr><td>100+</td></tr>
            </tbody>
          </table>
        </div>

        <!-- Result Summary -->
        <div id="sub-container-result-summary" class="summary-box">
          <h3>Result Summary</h3>
          <table class="summary-table">
            <tr>
              <th>K</th>
              <td id="sum-k"></td>
            </tr>
            <tr>
              <th>Yard</th>
              <td id="sum-yard">yard</td>
            </tr>
            <tr>
              <th>Berat</th>
              <td id="sum-berat">kg</td>
            </tr>
            <tr>
              <th>Meter</th>
              <td id="sum-meter">meter</td>
            </tr>
            <tr>
              <th>TP</th>
              <td id="sum-tp"></td>
            </tr>
            <tr>
              <th>PG</th>
              <td id="sum-pg"></td>
            </tr>
            <tr>
              <th>Grd</th>
              <td id="sum-grd"></td>
            </tr>
          </table>
        </div>

        <div id="sub-container-defect-summary" class="summary-box">
          <h3>Defect Summary</h3>

          <table class="summary-table defect-point-summary-table">
            <thead>
              <tr>
                <th>Defect Type</th>
                <th>Total Point</th>
                <th>Count</th>
              </tr>
            </thead>
            <tbody>
              <!-- filled on submit_summary_ack -->
            </tbody>
          </table>
        </div>

        <div id="sub-container-new-session" class="summary-box new-session-box">
          <button id="newSessionBtn" class="new-session-btn">
            New Session
          </button>
        </div>

      </div>

    </div>
</div>

<script type="module" src="js/main.js"></script>
</body>
</html>
